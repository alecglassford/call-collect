<div id="nav">
  <Link exact to="/"><h1>Call Collect</h1></Link>
  {{#each breadcrumbs as [text, href]}}
    <Link to="{{href}}">{{text}}</Link>
  {{/each}}
</div>
<div id="main">
  <Route exact path="/" component={{ProjectNav}}/>
  <Route path="/project/:slug" component={{Project}}/>
  <Route path="/new-project" component={{NewProject}}/>
</div>

<style>
  #nav {
    width: 100%;
    background-color: #85C1E9;
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
  }

  h1 {
    margin: 1em;
    font-size: 1em;
    font-family: "Source Serif Pro", serif;
    color: white;
  }

  :global(a), :global(a:visited) {
    text-decoration: none;
  }
</style>

<script>
  import Link from 'svelte-routing/Link.html';
  import Route from 'svelte-routing/Route.html';

  import NewProject from './NewProject.html';
  import ProjectNav from './ProjectNav.html';
  import Project from './Project.html';

  export default {
    components: { Link, Route },
    oncreate() {
      fetch('/api/projects').then(res => res.json()).then((projectList) => {
        this.store.set({ projectList });
      });
    },
    data() {
      return {
        ProjectNav,
        Project,
        NewProject,
        breadcrumbs: [],
      };
    },
  };
</script>
