<div id="project-info">
  <h2>{{name}}</h2>
  <h3>{{currentProject.fields.phone}}</h3>
  {{#if !currentPrompts}}
    Loading prompts.
  {{else}}
    <div id="prompts-container">
      {{#each currentPrompts as prompt}}
        <div>
          <h4>Prompt {{prompt.fields.index}}</h4>
          <audio controls src="{{audioUrl(prompt)}}"></audio>
        </div>
      {{/each}}
    </div>
  {{/if}}
  {{#if currentSubmissions}}
    <p>This project has received {{currentSubmissions.length}} submissions.</p>
  {{/if}}
</div>

<style>
  #project-info {
    border: 1px dotted grey;
  }

  #prompts-container {
    display: flex;
    flex-direction:row;
  }

  #prompts-container div {
    margin: 1em;
  }
</style>

<script>
  export default {
    computed: {
      name: currentProject => currentProject.fields.name,
    },
    helpers: {
      audioUrl: prompt => prompt.fields.audio[0].url,
    },
    data() {
      return {
        currentProject: null,
        currentPrompts: null,
        currentSubmissions: null,
      };
    },
  };
</script>
