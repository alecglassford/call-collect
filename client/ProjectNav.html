<div>
  <h2>Your Projects</h2>
  {{#if $projectList}}
  {{#await $projectList}}
    <p>Waiting for project list...</p>
  {{then projects}}
      {{#if projects.length === 0}}
        <p>You don't have any projects yet.</p>
      {{else}}
        {{#each projects as project}}
          <Link to="/project/{{project.id}}" on:click="store.set({ project })">
            {{project.fields.name}}
          </Link>
        {{/each}}
      {{/if}}
      <Link id="new-project" to="/new-project">âž• New project</Link>
  {{catch err}}
    <p>Error getting project names</p>
  {{/await}}
  {{/if}}
</div>

<style>
  div {
    margin: 0 auto;
    padding: 1em 0;
    background-color: #2E4053;
    color: #F4F6F7;
  }

  h2 {
    text-align: center;
    font-family: "Source Serif Pro", Palatino, Georgia, serif;
  }

  :global(a) {
    display: block;
    min-height: 2em;
    margin: 0;
    padding: 0.5em;
    border-top: 1px solid grey;
    text-align: center;
    font-family: sans-serif;
  }

  :global(a:hover) {
    background-color: steelblue;
    cursor: pointer;
  }

  :global(a), :global(a:visited) {
    color: white;
  }

  #new-project {
    font-weight: bolder;
  }
</style>

<script>
  import Link from 'svelte-routing/Link.html';
  export default {
    components: { Link },
  };
</script>
